{% extends "app_sheet/layout.html" %}
{% block content %}

    {% load djangocodemirror_tags %}

    <h2>&nbsp;</h2>
    <h2>Sheet Editor</h2>


    <p class="smallgray">
        <i>Owner: </i> {{ sheet.owner }}
        &#x2022;
        <i>Created: </i> {{ sheet.created }}
        &#x2022;
        <i>Last Modified: </i> {{ sheet.modified }}
    </p>

    <form method="post" action="{% url 'action_dispatcher' sheet_id=sheet.id %}">{% csrf_token %}
        {% csrf_token %}
        <div class="main-scrollable2">
        <textarea id="sheet-edit" name="sheet">{{ sheet.content }}</textarea>
        </div>
        <input name="validate" class="btn btn-primary" type="submit" value="Prettify"/>
        <input name="generate" class="btn btn-primary" type="submit" value="Generate PDF"/>
        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>



        {% if permissions.save %}
            <input name="save" class="btn btn-primary" type="submit" value="Save"/>
        {% else %}
            <div style="display: inline-block" data-toggle="tooltip" data-placement="top"
                 title="You must be logged in and be the owner of a sheet to save it.">
            <input name="save.disabled" class="btn btn-primary" type="submit" value="Save" style="pointer-events: none" disabled/>
            </div>
        {% endif %}

        <input name="revert" class="btn btn-primary" type="submit" value="Revert"/>

        {% if permissions.clone %}
            <input name="clone" class="btn btn-primary" type="submit" value="Clone"/>
        {% else %}
            <div style="display: inline-block" data-toggle="tooltip" data-placement="top"
                 title="You must be logged in to create a copy of a sheet.">
            <input name="clone.disabled" class="btn btn-primary" type="submit" value="Clone"
                   data-toggle="tooltip" data-placement="top" disabled/>
            </div>
        {% endif %}

    </form>

    {% codemirror_instance 'restructuredtext' 'code_codemirror' 'sheet-edit' %}

{% endblock %}
